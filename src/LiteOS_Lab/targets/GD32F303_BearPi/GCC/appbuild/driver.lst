ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"driver.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.bss.s_los_driv_module,"aw",%nobits
  18              		.align	2
  21              	s_los_driv_module:
  22 0000 00000000 		.space	12
  22      00000000 
  22      00000000 
  23              		.section	.text.__driv_match,"ax",%progbits
  24              		.align	1
  25              		.syntax unified
  26              		.thumb
  27              		.thumb_func
  28              		.fpu fpv4-sp-d16
  30              	__driv_match:
  31              	.LFB3:
  32              		.file 1 "C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver/drive
   1:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /*----------------------------------------------------------------------------
   2:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * Copyright (c) <2018>, <Huawei Technologies Co., Ltd>
   3:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * All rights reserved.
   4:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * are permitted provided that the following conditions are met:
   6:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * conditions and the following disclaimer.
   8:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * provided with the distribution.
  11:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * to endorse or promote products derived from this software without specific prior written
  13:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * permission.
  14:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  20:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  *---------------------------------------------------------------------------*/
  26:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /*----------------------------------------------------------------------------
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 2


  27:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * Notice of Export Control Law
  28:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * ===============================================
  29:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
  31:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
  32:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  * applicable export control laws and regulations.
  33:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  *---------------------------------------------------------------------------*/
  34:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /**
  35:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  *  DATE                AUTHOR      INSTRUCTION
  36:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  *  2019-05-14 09:36  zhangqianfu  The first version  
  37:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  *
  38:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****  */
  39:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #include <string.h>
  40:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #include <stdio.h>
  41:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #include <stdlib.h>
  42:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #include <driver.h>
  43:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
  44:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #if CONFIG_DRIVER_ENABLE
  45:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
  46:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #include <sys/fcntl.h>
  47:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #include <sys/types.h>
  48:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
  49:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #define cn_driv_status_initialized     (1<<0)
  50:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #define cn_driv_status_opend           (1<<1)
  51:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
  52:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
  53:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** //define the error type has happened in the driver
  54:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** typedef enum
  55:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
  56:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     en_dev_err_none = 0,   //no err happened
  57:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     en_dev_err_init,       //call bsp open function failed
  58:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     en_dev_err_open,       //call bsp init function failed
  59:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
  60:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }en_dev_error_type;
  61:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
  62:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
  63:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** struct driv_cb
  64:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
  65:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     void                  *nxt;              //add the deice to device list
  66:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     void                  *pri;              //bsp developed para
  67:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     const char            *name;             //the device name
  68:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     int                    flagmask;         //copy from the register
  69:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     const los_driv_op_t   *op;               //operation method
  70:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     unsigned int           drivstatus;       //show the state here like init or something like this
  71:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     los_dev_t              devlst;           //the open list,support the multi open
  72:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     //following member used for the debug
  73:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     size_t            total_write;            //how many data has been sent
  74:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     size_t            total_read;             //how many data has received
  75:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     size_t            opencounter;            //reference counter
  76:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     unsigned int      errno;                  //the last errno has happend
  77:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** };
  78:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** typedef struct
  79:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
  80:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     osal_mutex_t                    lock;      //used to lock the devlst
  81:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct driv_cb                 *drivlst;   //all the dev will be added to the list
  82:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     unsigned int                    drivnum;
  83:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }los_driv_module;
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 3


  84:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** static  los_driv_module   s_los_driv_module ;  //manage all the driver here
  85:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
  86:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** //used this function to find a dev
  87:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** static struct driv_cb *__driv_match(const char *name)
  88:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
  33              		.loc 1 88 0
  34              		.cfi_startproc
  35              		@ args = 0, pretend = 0, frame = 16
  36              		@ frame_needed = 1, uses_anonymous_args = 0
  37 0000 80B5     		push	{r7, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 8
  40              		.cfi_offset 7, -8
  41              		.cfi_offset 14, -4
  42 0002 84B0     		sub	sp, sp, #16
  43              	.LCFI1:
  44              		.cfi_def_cfa_offset 24
  45 0004 00AF     		add	r7, sp, #0
  46              	.LCFI2:
  47              		.cfi_def_cfa_register 7
  48 0006 7860     		str	r0, [r7, #4]
  89:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct driv_cb *ret = NULL;
  49              		.loc 1 89 0
  50 0008 0023     		movs	r3, #0
  51 000a FB60     		str	r3, [r7, #12]
  90:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
  91:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     ret = s_los_driv_module.drivlst;
  52              		.loc 1 91 0
  53 000c 0C4B     		ldr	r3, .L8
  54 000e 5B68     		ldr	r3, [r3, #4]
  55 0010 FB60     		str	r3, [r7, #12]
  92:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     while(NULL != ret)
  56              		.loc 1 92 0
  57 0012 0BE0     		b	.L2
  58              	.L5:
  93:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
  94:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         if(0 == strcmp(name,ret->name))
  59              		.loc 1 94 0
  60 0014 FB68     		ldr	r3, [r7, #12]
  61 0016 9B68     		ldr	r3, [r3, #8]
  62 0018 1946     		mov	r1, r3
  63 001a 7868     		ldr	r0, [r7, #4]
  64 001c FFF7FEFF 		bl	strcmp
  65 0020 0346     		mov	r3, r0
  66 0022 002B     		cmp	r3, #0
  67 0024 06D0     		beq	.L7
  95:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
  96:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             break;
  97:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
  98:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         ret = ret->nxt;
  68              		.loc 1 98 0
  69 0026 FB68     		ldr	r3, [r7, #12]
  70 0028 1B68     		ldr	r3, [r3]
  71 002a FB60     		str	r3, [r7, #12]
  72              	.L2:
  92:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
  73              		.loc 1 92 0
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 4


  74 002c FB68     		ldr	r3, [r7, #12]
  75 002e 002B     		cmp	r3, #0
  76 0030 F0D1     		bne	.L5
  77 0032 00E0     		b	.L4
  78              	.L7:
  96:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
  79              		.loc 1 96 0
  80 0034 00BF     		nop
  81              	.L4:
  99:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 100:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 101:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return ret;
  82              		.loc 1 101 0
  83 0036 FB68     		ldr	r3, [r7, #12]
 102:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
  84              		.loc 1 102 0
  85 0038 1846     		mov	r0, r3
  86 003a 1037     		adds	r7, r7, #16
  87              	.LCFI3:
  88              		.cfi_def_cfa_offset 8
  89 003c BD46     		mov	sp, r7
  90              	.LCFI4:
  91              		.cfi_def_cfa_register 13
  92              		@ sp needed
  93 003e 80BD     		pop	{r7, pc}
  94              	.L9:
  95              		.align	2
  96              	.L8:
  97 0040 00000000 		.word	s_los_driv_module
  98              		.cfi_endproc
  99              	.LFE3:
 101              		.section	.text.los_driv_register,"ax",%progbits
 102              		.align	1
 103              		.global	los_driv_register
 104              		.syntax unified
 105              		.thumb
 106              		.thumb_func
 107              		.fpu fpv4-sp-d16
 109              	los_driv_register:
 110              	.LFB4:
 103:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 104:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /*******************************************************************************
 105:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** function     :bsp developer use this function to add a device to the system
 106:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** parameters   :
 107:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** instruction  :NULL if failed else return the device handle
 108:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** *******************************************************************************/
 109:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 110:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** los_driv_t los_driv_register(os_driv_para_t *para)
 111:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
 111              		.loc 1 111 0
 112              		.cfi_startproc
 113              		@ args = 0, pretend = 0, frame = 16
 114              		@ frame_needed = 1, uses_anonymous_args = 0
 115 0000 80B5     		push	{r7, lr}
 116              	.LCFI5:
 117              		.cfi_def_cfa_offset 8
 118              		.cfi_offset 7, -8
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 5


 119              		.cfi_offset 14, -4
 120 0002 84B0     		sub	sp, sp, #16
 121              	.LCFI6:
 122              		.cfi_def_cfa_offset 24
 123 0004 00AF     		add	r7, sp, #0
 124              	.LCFI7:
 125              		.cfi_def_cfa_register 7
 126 0006 7860     		str	r0, [r7, #4]
 112:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct driv_cb  *driv = NULL;
 127              		.loc 1 112 0
 128 0008 0023     		movs	r3, #0
 129 000a FB60     		str	r3, [r7, #12]
 113:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 114:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if((NULL == para->name)||(NULL == para->op))
 130              		.loc 1 114 0
 131 000c 7B68     		ldr	r3, [r7, #4]
 132 000e 1B68     		ldr	r3, [r3]
 133 0010 002B     		cmp	r3, #0
 134 0012 51D0     		beq	.L20
 135              		.loc 1 114 0 is_stmt 0 discriminator 1
 136 0014 7B68     		ldr	r3, [r7, #4]
 137 0016 5B68     		ldr	r3, [r3, #4]
 138 0018 002B     		cmp	r3, #0
 139 001a 4DD0     		beq	.L20
 115:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 116:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_PARAS;
 117:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 118:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 119:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     driv = osal_malloc(sizeof(struct driv_cb));
 140              		.loc 1 119 0 is_stmt 1
 141 001c 2C20     		movs	r0, #44
 142 001e FFF7FEFF 		bl	osal_malloc
 143 0022 F860     		str	r0, [r7, #12]
 120:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(NULL == driv)
 144              		.loc 1 120 0
 145 0024 FB68     		ldr	r3, [r7, #12]
 146 0026 002B     		cmp	r3, #0
 147 0028 48D0     		beq	.L21
 121:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 122:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_MALLOC;
 123:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 124:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     memset(driv,0,sizeof(struct driv_cb));
 148              		.loc 1 124 0
 149 002a 2C22     		movs	r2, #44
 150 002c 0021     		movs	r1, #0
 151 002e F868     		ldr	r0, [r7, #12]
 152 0030 FFF7FEFF 		bl	memset
 125:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 126:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     //do the member initialize
 127:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     driv->name = para->name;
 153              		.loc 1 127 0
 154 0034 7B68     		ldr	r3, [r7, #4]
 155 0036 1A68     		ldr	r2, [r3]
 156 0038 FB68     		ldr	r3, [r7, #12]
 157 003a 9A60     		str	r2, [r3, #8]
 128:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     driv->op = para->op;
 158              		.loc 1 128 0
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 6


 159 003c 7B68     		ldr	r3, [r7, #4]
 160 003e 5A68     		ldr	r2, [r3, #4]
 161 0040 FB68     		ldr	r3, [r7, #12]
 162 0042 1A61     		str	r2, [r3, #16]
 129:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     driv->pri = para->pri;
 163              		.loc 1 129 0
 164 0044 7B68     		ldr	r3, [r7, #4]
 165 0046 9A68     		ldr	r2, [r3, #8]
 166 0048 FB68     		ldr	r3, [r7, #12]
 167 004a 5A60     		str	r2, [r3, #4]
 130:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     driv->flagmask = para->flag;
 168              		.loc 1 130 0
 169 004c 7B68     		ldr	r3, [r7, #4]
 170 004e DB68     		ldr	r3, [r3, #12]
 171 0050 1A46     		mov	r2, r3
 172 0052 FB68     		ldr	r3, [r7, #12]
 173 0054 DA60     		str	r2, [r3, #12]
 131:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 132:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     //add it to the device list if no device with the same name exsit
 133:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(false == osal_mutex_lock(s_los_driv_module.lock))
 174              		.loc 1 133 0
 175 0056 1C4B     		ldr	r3, .L24
 176 0058 1B68     		ldr	r3, [r3]
 177 005a 1846     		mov	r0, r3
 178 005c FFF7FEFF 		bl	osal_mutex_lock
 179 0060 0346     		mov	r3, r0
 180 0062 002B     		cmp	r3, #0
 181 0064 21D0     		beq	.L22
 134:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 135:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_MUTEX;
 136:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 137:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 138:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(NULL != __driv_match(para->name))
 182              		.loc 1 138 0
 183 0066 7B68     		ldr	r3, [r7, #4]
 184 0068 1B68     		ldr	r3, [r3]
 185 006a 1846     		mov	r0, r3
 186 006c FFF7FEFF 		bl	__driv_match
 187 0070 0346     		mov	r3, r0
 188 0072 002B     		cmp	r3, #0
 189 0074 12D1     		bne	.L23
 139:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 140:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_EXISTED;
 141:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 142:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 143:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     driv->nxt = s_los_driv_module.drivlst;
 190              		.loc 1 143 0
 191 0076 144B     		ldr	r3, .L24
 192 0078 5A68     		ldr	r2, [r3, #4]
 193 007a FB68     		ldr	r3, [r7, #12]
 194 007c 1A60     		str	r2, [r3]
 144:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     s_los_driv_module.drivlst = driv;
 195              		.loc 1 144 0
 196 007e 124A     		ldr	r2, .L24
 197 0080 FB68     		ldr	r3, [r7, #12]
 198 0082 5360     		str	r3, [r2, #4]
 145:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     osal_mutex_unlock(s_los_driv_module.lock);
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 7


 199              		.loc 1 145 0
 200 0084 104B     		ldr	r3, .L24
 201 0086 1B68     		ldr	r3, [r3]
 202 0088 1846     		mov	r0, r3
 203 008a FFF7FEFF 		bl	osal_mutex_unlock
 146:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 147:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     s_los_driv_module.drivnum++;
 204              		.loc 1 147 0
 205 008e 0E4B     		ldr	r3, .L24
 206 0090 9B68     		ldr	r3, [r3, #8]
 207 0092 0133     		adds	r3, r3, #1
 208 0094 0C4A     		ldr	r2, .L24
 209 0096 9360     		str	r3, [r2, #8]
 148:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 149:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return driv;
 210              		.loc 1 149 0
 211 0098 FB68     		ldr	r3, [r7, #12]
 212 009a 11E0     		b	.L17
 213              	.L23:
 140:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 214              		.loc 1 140 0
 215 009c 00BF     		nop
 216              	.L16:
 150:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 151:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 152:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_EXISTED:
 153:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     osal_mutex_unlock(s_los_driv_module.lock);
 217              		.loc 1 153 0
 218 009e 0A4B     		ldr	r3, .L24
 219 00a0 1B68     		ldr	r3, [r3]
 220 00a2 1846     		mov	r0, r3
 221 00a4 FFF7FEFF 		bl	osal_mutex_unlock
 222 00a8 00E0     		b	.L14
 223              	.L22:
 135:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 224              		.loc 1 135 0
 225 00aa 00BF     		nop
 226              	.L14:
 154:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_MUTEX:
 155:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     osal_free(driv);
 227              		.loc 1 155 0
 228 00ac F868     		ldr	r0, [r7, #12]
 229 00ae FFF7FEFF 		bl	osal_free
 156:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     driv = NULL;
 230              		.loc 1 156 0
 231 00b2 0023     		movs	r3, #0
 232 00b4 FB60     		str	r3, [r7, #12]
 233 00b6 02E0     		b	.L18
 234              	.L11:
 235              	.L20:
 157:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_MALLOC:
 236              		.loc 1 157 0
 237 00b8 00BF     		nop
 238 00ba 00E0     		b	.L18
 239              	.L21:
 122:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 240              		.loc 1 122 0
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 8


 241 00bc 00BF     		nop
 242              	.L18:
 158:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_PARAS:
 159:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return driv;
 243              		.loc 1 159 0
 244 00be FB68     		ldr	r3, [r7, #12]
 245              	.L17:
 160:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
 246              		.loc 1 160 0
 247 00c0 1846     		mov	r0, r3
 248 00c2 1037     		adds	r7, r7, #16
 249              	.LCFI8:
 250              		.cfi_def_cfa_offset 8
 251 00c4 BD46     		mov	sp, r7
 252              	.LCFI9:
 253              		.cfi_def_cfa_register 13
 254              		@ sp needed
 255 00c6 80BD     		pop	{r7, pc}
 256              	.L25:
 257              		.align	2
 258              	.L24:
 259 00c8 00000000 		.word	s_los_driv_module
 260              		.cfi_endproc
 261              	.LFE4:
 263              		.section	.text.los_driv_unregister,"ax",%progbits
 264              		.align	1
 265              		.global	los_driv_unregister
 266              		.syntax unified
 267              		.thumb
 268              		.thumb_func
 269              		.fpu fpv4-sp-d16
 271              	los_driv_unregister:
 272              	.LFB5:
 161:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 162:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /*******************************************************************************
 163:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** function     :bsp developer use this function to remove a device from the system
 164:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** parameters   :
 165:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** instruction  :if the device has been refered,then will fail here
 166:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** *******************************************************************************/
 167:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** bool_t los_driv_unregister(const char *name)
 168:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
 273              		.loc 1 168 0
 274              		.cfi_startproc
 275              		@ args = 0, pretend = 0, frame = 24
 276              		@ frame_needed = 1, uses_anonymous_args = 0
 277 0000 80B5     		push	{r7, lr}
 278              	.LCFI10:
 279              		.cfi_def_cfa_offset 8
 280              		.cfi_offset 7, -8
 281              		.cfi_offset 14, -4
 282 0002 86B0     		sub	sp, sp, #24
 283              	.LCFI11:
 284              		.cfi_def_cfa_offset 32
 285 0004 00AF     		add	r7, sp, #0
 286              	.LCFI12:
 287              		.cfi_def_cfa_register 7
 288 0006 7860     		str	r0, [r7, #4]
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 9


 169:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct driv_cb *tmp = NULL;
 289              		.loc 1 169 0
 290 0008 0023     		movs	r3, #0
 291 000a 7B61     		str	r3, [r7, #20]
 170:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct driv_cb *pre = NULL;
 292              		.loc 1 170 0
 293 000c 0023     		movs	r3, #0
 294 000e 3B61     		str	r3, [r7, #16]
 171:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     bool_t         ret = false;
 295              		.loc 1 171 0
 296 0010 0023     		movs	r3, #0
 297 0012 FB60     		str	r3, [r7, #12]
 172:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(NULL == name)
 298              		.loc 1 172 0
 299 0014 7B68     		ldr	r3, [r7, #4]
 300 0016 002B     		cmp	r3, #0
 301 0018 01D1     		bne	.L27
 173:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 174:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         return ret;
 302              		.loc 1 174 0
 303 001a FB68     		ldr	r3, [r7, #12]
 304 001c 3FE0     		b	.L28
 305              	.L27:
 175:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 176:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 177:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(osal_mutex_lock(s_los_driv_module.lock))
 306              		.loc 1 177 0
 307 001e 224B     		ldr	r3, .L38
 308 0020 1B68     		ldr	r3, [r3]
 309 0022 1846     		mov	r0, r3
 310 0024 FFF7FEFF 		bl	osal_mutex_lock
 311 0028 0346     		mov	r3, r0
 312 002a 002B     		cmp	r3, #0
 313 002c 36D0     		beq	.L29
 178:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 179:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         tmp = s_los_driv_module.drivlst;
 314              		.loc 1 179 0
 315 002e 1E4B     		ldr	r3, .L38
 316 0030 5B68     		ldr	r3, [r3, #4]
 317 0032 7B61     		str	r3, [r7, #20]
 180:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         pre = NULL;
 318              		.loc 1 180 0
 319 0034 0023     		movs	r3, #0
 320 0036 3B61     		str	r3, [r7, #16]
 181:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         while(NULL != tmp)
 321              		.loc 1 181 0
 322 0038 0DE0     		b	.L30
 323              	.L33:
 182:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 183:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             if( 0 == strcmp(name,tmp->name))
 324              		.loc 1 183 0
 325 003a 7B69     		ldr	r3, [r7, #20]
 326 003c 9B68     		ldr	r3, [r3, #8]
 327 003e 1946     		mov	r1, r3
 328 0040 7868     		ldr	r0, [r7, #4]
 329 0042 FFF7FEFF 		bl	strcmp
 330 0046 0346     		mov	r3, r0
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 10


 331 0048 002B     		cmp	r3, #0
 332 004a 08D0     		beq	.L37
 184:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             {
 185:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 break;
 186:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             }
 187:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             pre = tmp;
 333              		.loc 1 187 0
 334 004c 7B69     		ldr	r3, [r7, #20]
 335 004e 3B61     		str	r3, [r7, #16]
 188:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             tmp = tmp->nxt;
 336              		.loc 1 188 0
 337 0050 7B69     		ldr	r3, [r7, #20]
 338 0052 1B68     		ldr	r3, [r3]
 339 0054 7B61     		str	r3, [r7, #20]
 340              	.L30:
 181:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 341              		.loc 1 181 0
 342 0056 7B69     		ldr	r3, [r7, #20]
 343 0058 002B     		cmp	r3, #0
 344 005a EED1     		bne	.L33
 345 005c 00E0     		b	.L32
 346              	.L37:
 185:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             }
 347              		.loc 1 185 0
 348 005e 00BF     		nop
 349              	.L32:
 189:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
 190:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         if(NULL != tmp)  //find the device here
 350              		.loc 1 190 0
 351 0060 7B69     		ldr	r3, [r7, #20]
 352 0062 002B     		cmp	r3, #0
 353 0064 15D0     		beq	.L34
 191:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 192:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             if(pre == NULL)
 354              		.loc 1 192 0
 355 0066 3B69     		ldr	r3, [r7, #16]
 356 0068 002B     		cmp	r3, #0
 357 006a 04D1     		bne	.L35
 193:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             {
 194:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 s_los_driv_module.drivlst = tmp->nxt;
 358              		.loc 1 194 0
 359 006c 7B69     		ldr	r3, [r7, #20]
 360 006e 1B68     		ldr	r3, [r3]
 361 0070 0D4A     		ldr	r2, .L38
 362 0072 5360     		str	r3, [r2, #4]
 363 0074 03E0     		b	.L36
 364              	.L35:
 195:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             }
 196:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             else
 197:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             {
 198:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 pre->nxt = tmp->nxt;
 365              		.loc 1 198 0
 366 0076 7B69     		ldr	r3, [r7, #20]
 367 0078 1A68     		ldr	r2, [r3]
 368 007a 3B69     		ldr	r3, [r7, #16]
 369 007c 1A60     		str	r2, [r3]
 370              	.L36:
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 11


 199:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             }
 200:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 201:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             osal_free(tmp);
 371              		.loc 1 201 0
 372 007e 7869     		ldr	r0, [r7, #20]
 373 0080 FFF7FEFF 		bl	osal_free
 202:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             ret = true;
 374              		.loc 1 202 0
 375 0084 0123     		movs	r3, #1
 376 0086 FB60     		str	r3, [r7, #12]
 203:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 204:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             s_los_driv_module.drivnum--;
 377              		.loc 1 204 0
 378 0088 074B     		ldr	r3, .L38
 379 008a 9B68     		ldr	r3, [r3, #8]
 380 008c 013B     		subs	r3, r3, #1
 381 008e 064A     		ldr	r2, .L38
 382 0090 9360     		str	r3, [r2, #8]
 383              	.L34:
 205:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
 206:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 207:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         osal_mutex_unlock(s_los_driv_module.lock);
 384              		.loc 1 207 0
 385 0092 054B     		ldr	r3, .L38
 386 0094 1B68     		ldr	r3, [r3]
 387 0096 1846     		mov	r0, r3
 388 0098 FFF7FEFF 		bl	osal_mutex_unlock
 389              	.L29:
 208:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 209:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 210:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return ret;
 390              		.loc 1 210 0
 391 009c FB68     		ldr	r3, [r7, #12]
 392              	.L28:
 211:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
 393              		.loc 1 211 0
 394 009e 1846     		mov	r0, r3
 395 00a0 1837     		adds	r7, r7, #24
 396              	.LCFI13:
 397              		.cfi_def_cfa_offset 8
 398 00a2 BD46     		mov	sp, r7
 399              	.LCFI14:
 400              		.cfi_def_cfa_register 13
 401              		@ sp needed
 402 00a4 80BD     		pop	{r7, pc}
 403              	.L39:
 404 00a6 00BF     		.align	2
 405              	.L38:
 406 00a8 00000000 		.word	s_los_driv_module
 407              		.cfi_endproc
 408              	.LFE5:
 410              		.section	.text.los_driv_event,"ax",%progbits
 411              		.align	1
 412              		.global	los_driv_event
 413              		.syntax unified
 414              		.thumb
 415              		.thumb_func
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 12


 416              		.fpu fpv4-sp-d16
 418              	los_driv_event:
 419              	.LFB6:
 212:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 213:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /*******************************************************************************
 214:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** function     :bsp developer use this function to notify the application any event has happened
 215:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** parameters   :
 216:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** instruction  :not implement yet,we will do it as the asynchronize call
 217:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** *******************************************************************************/
 218:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** bool_t los_driv_event(los_driv_t driv,unsigned int event,void *para)
 219:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
 420              		.loc 1 219 0
 421              		.cfi_startproc
 422              		@ args = 0, pretend = 0, frame = 16
 423              		@ frame_needed = 1, uses_anonymous_args = 0
 424              		@ link register save eliminated.
 425 0000 80B4     		push	{r7}
 426              	.LCFI15:
 427              		.cfi_def_cfa_offset 4
 428              		.cfi_offset 7, -4
 429 0002 85B0     		sub	sp, sp, #20
 430              	.LCFI16:
 431              		.cfi_def_cfa_offset 24
 432 0004 00AF     		add	r7, sp, #0
 433              	.LCFI17:
 434              		.cfi_def_cfa_register 7
 435 0006 F860     		str	r0, [r7, #12]
 436 0008 B960     		str	r1, [r7, #8]
 437 000a 7A60     		str	r2, [r7, #4]
 220:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return false;
 438              		.loc 1 220 0
 439 000c 0023     		movs	r3, #0
 221:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
 440              		.loc 1 221 0
 441 000e 1846     		mov	r0, r3
 442 0010 1437     		adds	r7, r7, #20
 443              	.LCFI18:
 444              		.cfi_def_cfa_offset 4
 445 0012 BD46     		mov	sp, r7
 446              	.LCFI19:
 447              		.cfi_def_cfa_register 13
 448              		@ sp needed
 449 0014 5DF8047B 		ldr	r7, [sp], #4
 450              	.LCFI20:
 451              		.cfi_restore 7
 452              		.cfi_def_cfa_offset 0
 453 0018 7047     		bx	lr
 454              		.cfi_endproc
 455              	.LFE6:
 457              		.section	.text.osdriv_load_static,"ax",%progbits
 458              		.align	1
 459              		.syntax unified
 460              		.thumb
 461              		.thumb_func
 462              		.fpu fpv4-sp-d16
 464              	osdriv_load_static:
 465              	.LFB7:
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 13


 222:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 223:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 224:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #ifdef __CC_ARM /* ARM C Compiler ,like keil,options for linker:--keep *.o(osdriv)*/
 225:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** extern unsigned int osdriv$$Base;
 226:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** extern unsigned int osdriv$$Limit;
 227:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** //#pragma section("osdriv", read)
 228:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #endif
 229:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 230:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 231:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** static void osdriv_load_static(void){
 466              		.loc 1 231 0
 467              		.cfi_startproc
 468              		@ args = 0, pretend = 0, frame = 16
 469              		@ frame_needed = 1, uses_anonymous_args = 0
 470 0000 80B5     		push	{r7, lr}
 471              	.LCFI21:
 472              		.cfi_def_cfa_offset 8
 473              		.cfi_offset 7, -8
 474              		.cfi_offset 14, -4
 475 0002 84B0     		sub	sp, sp, #16
 476              	.LCFI22:
 477              		.cfi_def_cfa_offset 24
 478 0004 00AF     		add	r7, sp, #0
 479              	.LCFI23:
 480              		.cfi_def_cfa_register 7
 232:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 233:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     os_driv_para_t *para;
 234:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     unsigned int num = 0;
 481              		.loc 1 234 0
 482 0006 0023     		movs	r3, #0
 483 0008 7B60     		str	r3, [r7, #4]
 235:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     int i = 0;
 484              		.loc 1 235 0
 485 000a 0023     		movs	r3, #0
 486 000c BB60     		str	r3, [r7, #8]
 236:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #if defined (__CC_ARM)    //you could add other compiler like this
 237:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     num = ((unsigned int)&osdriv$$Limit-(unsigned int)&osdriv$$Base)/sizeof(os_driv_para_t);
 238:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     para = (os_driv_para_t *) &osdriv$$Base;
 239:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #elif defined(__GNUC__)
 240:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     extern unsigned int __osdriv_start;
 241:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     extern unsigned int __osdriv_end;
 242:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     para = (os_driv_para_t *)&__osdriv_start;
 487              		.loc 1 242 0
 488 000e 0D4B     		ldr	r3, .L46
 489 0010 FB60     		str	r3, [r7, #12]
 243:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     num = ((unsigned int )&__osdriv_end - (unsigned int)&__osdriv_start)/sizeof(os_driv_para_t);
 490              		.loc 1 243 0
 491 0012 0D4A     		ldr	r2, .L46+4
 492 0014 0B4B     		ldr	r3, .L46
 493 0016 D31A     		subs	r3, r2, r3
 494 0018 1B09     		lsrs	r3, r3, #4
 495 001a 7B60     		str	r3, [r7, #4]
 244:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #else
 245:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     #error("unknown compiler here");
 246:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #endif
 247:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     for(i =0;i<num;i++)
 496              		.loc 1 247 0
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 14


 497 001c 0023     		movs	r3, #0
 498 001e BB60     		str	r3, [r7, #8]
 499 0020 08E0     		b	.L43
 500              	.L44:
 248:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 249:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         los_driv_register(para);
 501              		.loc 1 249 0 discriminator 3
 502 0022 F868     		ldr	r0, [r7, #12]
 503 0024 FFF7FEFF 		bl	los_driv_register
 250:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         para++;
 504              		.loc 1 250 0 discriminator 3
 505 0028 FB68     		ldr	r3, [r7, #12]
 506 002a 1033     		adds	r3, r3, #16
 507 002c FB60     		str	r3, [r7, #12]
 247:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 508              		.loc 1 247 0 discriminator 3
 509 002e BB68     		ldr	r3, [r7, #8]
 510 0030 0133     		adds	r3, r3, #1
 511 0032 BB60     		str	r3, [r7, #8]
 512              	.L43:
 247:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 513              		.loc 1 247 0 is_stmt 0 discriminator 1
 514 0034 BB68     		ldr	r3, [r7, #8]
 515 0036 7A68     		ldr	r2, [r7, #4]
 516 0038 9A42     		cmp	r2, r3
 517 003a F2D8     		bhi	.L44
 251:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 252:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 253:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return;
 518              		.loc 1 253 0 is_stmt 1
 519 003c 00BF     		nop
 254:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
 520              		.loc 1 254 0
 521 003e 1037     		adds	r7, r7, #16
 522              	.LCFI24:
 523              		.cfi_def_cfa_offset 8
 524 0040 BD46     		mov	sp, r7
 525              	.LCFI25:
 526              		.cfi_def_cfa_register 13
 527              		@ sp needed
 528 0042 80BD     		pop	{r7, pc}
 529              	.L47:
 530              		.align	2
 531              	.L46:
 532 0044 00000000 		.word	__osdriv_start
 533 0048 00000000 		.word	__osdriv_end
 534              		.cfi_endproc
 535              	.LFE7:
 537              		.section	.text.los_driv_init,"ax",%progbits
 538              		.align	1
 539              		.global	los_driv_init
 540              		.syntax unified
 541              		.thumb
 542              		.thumb_func
 543              		.fpu fpv4-sp-d16
 545              	los_driv_init:
 546              	.LFB8:
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 15


 255:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 256:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /*******************************************************************************
 257:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** function     :the device module entry
 258:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** parameters   :
 259:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** instruction  :call this function to initialize the device module here
 260:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               load the static init from section os_device
 261:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** *******************************************************************************/
 262:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** bool_t  los_driv_init()
 263:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
 547              		.loc 1 263 0
 548              		.cfi_startproc
 549              		@ args = 0, pretend = 0, frame = 8
 550              		@ frame_needed = 1, uses_anonymous_args = 0
 551 0000 80B5     		push	{r7, lr}
 552              	.LCFI26:
 553              		.cfi_def_cfa_offset 8
 554              		.cfi_offset 7, -8
 555              		.cfi_offset 14, -4
 556 0002 82B0     		sub	sp, sp, #8
 557              	.LCFI27:
 558              		.cfi_def_cfa_offset 16
 559 0004 00AF     		add	r7, sp, #0
 560              	.LCFI28:
 561              		.cfi_def_cfa_register 7
 264:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     bool_t ret = false;
 562              		.loc 1 264 0
 563 0006 0023     		movs	r3, #0
 564 0008 7B60     		str	r3, [r7, #4]
 265:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 266:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     ret = osal_mutex_create(&s_los_driv_module.lock);
 565              		.loc 1 266 0
 566 000a 0848     		ldr	r0, .L53
 567 000c FFF7FEFF 		bl	osal_mutex_create
 568 0010 7860     		str	r0, [r7, #4]
 267:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(false == ret)
 569              		.loc 1 267 0
 570 0012 7B68     		ldr	r3, [r7, #4]
 571 0014 002B     		cmp	r3, #0
 572 0016 02D0     		beq	.L52
 268:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 269:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_MUTEX;
 270:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 271:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 272:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     //load all the static device init
 273:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     osdriv_load_static();
 573              		.loc 1 273 0
 574 0018 FFF7FEFF 		bl	osdriv_load_static
 575 001c 00E0     		b	.L50
 576              	.L52:
 269:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 577              		.loc 1 269 0
 578 001e 00BF     		nop
 579              	.L50:
 274:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 275:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_MUTEX:
 276:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return ret;
 580              		.loc 1 276 0
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 16


 581 0020 7B68     		ldr	r3, [r7, #4]
 277:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
 582              		.loc 1 277 0
 583 0022 1846     		mov	r0, r3
 584 0024 0837     		adds	r7, r7, #8
 585              	.LCFI29:
 586              		.cfi_def_cfa_offset 8
 587 0026 BD46     		mov	sp, r7
 588              	.LCFI30:
 589              		.cfi_def_cfa_register 13
 590              		@ sp needed
 591 0028 80BD     		pop	{r7, pc}
 592              	.L54:
 593 002a 00BF     		.align	2
 594              	.L53:
 595 002c 00000000 		.word	s_los_driv_module
 596              		.cfi_endproc
 597              	.LFE8:
 599              		.section	.text.los_dev_open,"ax",%progbits
 600              		.align	1
 601              		.global	los_dev_open
 602              		.syntax unified
 603              		.thumb
 604              		.thumb_func
 605              		.fpu fpv4-sp-d16
 607              	los_dev_open:
 608              	.LFB9:
 278:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 279:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** //here we define the data structure which used by the driv application apis
 280:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** struct dev_cb
 281:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
 282:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     void *nxt;            //used by the open lst
 283:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     void *driv;           //which attached dri here
 284:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     int openflag;       //here means the open state here
 285:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     unsigned int offset;
 286:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     //the following for the debug
 287:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     unsigned int readbytes;
 288:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     unsigned int writebytes;
 289:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** };
 290:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 291:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /*******************************************************************************
 292:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** function     :open the device with the specified name
 293:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** parameters   :
 294:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** instruction  :if first open the device,then will call the init function if exsited
 295:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** *******************************************************************************/
 296:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** los_dev_t  los_dev_open  (const char *name,unsigned int flag)
 297:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
 609              		.loc 1 297 0
 610              		.cfi_startproc
 611              		@ args = 0, pretend = 0, frame = 24
 612              		@ frame_needed = 1, uses_anonymous_args = 0
 613 0000 80B5     		push	{r7, lr}
 614              	.LCFI31:
 615              		.cfi_def_cfa_offset 8
 616              		.cfi_offset 7, -8
 617              		.cfi_offset 14, -4
 618 0002 86B0     		sub	sp, sp, #24
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 17


 619              	.LCFI32:
 620              		.cfi_def_cfa_offset 32
 621 0004 00AF     		add	r7, sp, #0
 622              	.LCFI33:
 623              		.cfi_def_cfa_register 7
 624 0006 7860     		str	r0, [r7, #4]
 625 0008 3960     		str	r1, [r7]
 298:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     bool_t opret = true;           //operate result
 626              		.loc 1 298 0
 627 000a 0123     		movs	r3, #1
 628 000c 3B61     		str	r3, [r7, #16]
 299:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct driv_cb *driv = NULL;   //the driver attached
 629              		.loc 1 299 0
 630 000e 0023     		movs	r3, #0
 631 0010 FB60     		str	r3, [r7, #12]
 300:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct dev_cb  *dev = NULL;    //the device opened
 632              		.loc 1 300 0
 633 0012 0023     		movs	r3, #0
 634 0014 7B61     		str	r3, [r7, #20]
 301:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if ( NULL == name )
 635              		.loc 1 301 0
 636 0016 7B68     		ldr	r3, [r7, #4]
 637 0018 002B     		cmp	r3, #0
 638 001a 00F08480 		beq	.L72
 302:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 303:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_PARAERR;
 304:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 305:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 306:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     dev = osal_malloc(sizeof(struct dev_cb));
 639              		.loc 1 306 0
 640 001e 1820     		movs	r0, #24
 641 0020 FFF7FEFF 		bl	osal_malloc
 642 0024 7861     		str	r0, [r7, #20]
 307:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if (NULL == dev)
 643              		.loc 1 307 0
 644 0026 7B69     		ldr	r3, [r7, #20]
 645 0028 002B     		cmp	r3, #0
 646 002a 7ED0     		beq	.L73
 308:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 309:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_MEMERR;
 310:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 311:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     memset(dev,0,sizeof(struct dev_cb));
 647              		.loc 1 311 0
 648 002c 1822     		movs	r2, #24
 649 002e 0021     		movs	r1, #0
 650 0030 7869     		ldr	r0, [r7, #20]
 651 0032 FFF7FEFF 		bl	memset
 312:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 313:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     opret = osal_mutex_lock(s_los_driv_module.lock);
 652              		.loc 1 313 0
 653 0036 404B     		ldr	r3, .L77
 654 0038 1B68     		ldr	r3, [r3]
 655 003a 1846     		mov	r0, r3
 656 003c FFF7FEFF 		bl	osal_mutex_lock
 657 0040 3861     		str	r0, [r7, #16]
 314:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(false == opret)
 658              		.loc 1 314 0
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 18


 659 0042 3B69     		ldr	r3, [r7, #16]
 660 0044 002B     		cmp	r3, #0
 661 0046 67D0     		beq	.L74
 315:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 316:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_MUTEXERR;
 317:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 318:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 319:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     driv = __driv_match(name);
 662              		.loc 1 319 0
 663 0048 7868     		ldr	r0, [r7, #4]
 664 004a FFF7FEFF 		bl	__driv_match
 665 004e F860     		str	r0, [r7, #12]
 320:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(NULL == driv)
 666              		.loc 1 320 0
 667 0050 FB68     		ldr	r3, [r7, #12]
 668 0052 002B     		cmp	r3, #0
 669 0054 57D0     		beq	.L75
 321:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 322:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_DRIVERR;
 323:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 324:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     //WE DON'T CARE TOO MUCH ABOUT THE RD AND WR FLAG,MAY BE TODO IT IN THE NEXT VERSION HERE
 325:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if((O_EXCL & driv->flagmask) && (NULL != driv->devlst))
 670              		.loc 1 325 0
 671 0056 FB68     		ldr	r3, [r7, #12]
 672 0058 DB68     		ldr	r3, [r3, #12]
 673 005a 03F40063 		and	r3, r3, #2048
 674 005e 002B     		cmp	r3, #0
 675 0060 03D0     		beq	.L63
 676              		.loc 1 325 0 is_stmt 0 discriminator 1
 677 0062 FB68     		ldr	r3, [r7, #12]
 678 0064 9B69     		ldr	r3, [r3, #24]
 679 0066 002B     		cmp	r3, #0
 680 0068 4FD1     		bne	.L76
 681              	.L63:
 326:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 327:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_EXCLERR;
 328:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 329:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 330:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if((0 == (driv->drivstatus & cn_driv_status_initialized)) && \
 682              		.loc 1 330 0 is_stmt 1
 683 006a FB68     		ldr	r3, [r7, #12]
 684 006c 5B69     		ldr	r3, [r3, #20]
 685 006e 03F00103 		and	r3, r3, #1
 686 0072 002B     		cmp	r3, #0
 687 0074 19D1     		bne	.L64
 331:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         (NULL != driv->op->init))
 688              		.loc 1 331 0 discriminator 1
 689 0076 FB68     		ldr	r3, [r7, #12]
 690 0078 1B69     		ldr	r3, [r3, #16]
 691 007a 9B69     		ldr	r3, [r3, #24]
 330:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         (NULL != driv->op->init))
 692              		.loc 1 330 0 discriminator 1
 693 007c 002B     		cmp	r3, #0
 694 007e 14D0     		beq	.L64
 332:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 333:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         opret = driv->op->init(driv->pri);
 695              		.loc 1 333 0
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 19


 696 0080 FB68     		ldr	r3, [r7, #12]
 697 0082 1B69     		ldr	r3, [r3, #16]
 698 0084 9B69     		ldr	r3, [r3, #24]
 699 0086 FA68     		ldr	r2, [r7, #12]
 700 0088 5268     		ldr	r2, [r2, #4]
 701 008a 1046     		mov	r0, r2
 702 008c 9847     		blx	r3
 703              	.LVL0:
 704 008e 3861     		str	r0, [r7, #16]
 334:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         if(false == opret)
 705              		.loc 1 334 0
 706 0090 3B69     		ldr	r3, [r7, #16]
 707 0092 002B     		cmp	r3, #0
 708 0094 03D1     		bne	.L65
 335:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 336:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             driv->errno = en_dev_err_init;
 709              		.loc 1 336 0
 710 0096 FB68     		ldr	r3, [r7, #12]
 711 0098 0122     		movs	r2, #1
 712 009a 9A62     		str	r2, [r3, #40]
 337:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             goto EXIT_INITERR;
 713              		.loc 1 337 0
 714 009c 36E0     		b	.L70
 715              	.L65:
 338:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
 339:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         driv->drivstatus |= cn_driv_status_initialized;
 716              		.loc 1 339 0
 717 009e FB68     		ldr	r3, [r7, #12]
 718 00a0 5B69     		ldr	r3, [r3, #20]
 719 00a2 43F00102 		orr	r2, r3, #1
 720 00a6 FB68     		ldr	r3, [r7, #12]
 721 00a8 5A61     		str	r2, [r3, #20]
 722              	.L64:
 340:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 341:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 342:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(NULL != driv->op->open)
 723              		.loc 1 342 0
 724 00aa FB68     		ldr	r3, [r7, #12]
 725 00ac 1B69     		ldr	r3, [r3, #16]
 726 00ae 1B68     		ldr	r3, [r3]
 727 00b0 002B     		cmp	r3, #0
 728 00b2 0FD0     		beq	.L66
 343:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 344:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         opret = driv->op->open(driv->pri,flag);
 729              		.loc 1 344 0
 730 00b4 FB68     		ldr	r3, [r7, #12]
 731 00b6 1B69     		ldr	r3, [r3, #16]
 732 00b8 1B68     		ldr	r3, [r3]
 733 00ba FA68     		ldr	r2, [r7, #12]
 734 00bc 5268     		ldr	r2, [r2, #4]
 735 00be 3968     		ldr	r1, [r7]
 736 00c0 1046     		mov	r0, r2
 737 00c2 9847     		blx	r3
 738              	.LVL1:
 739 00c4 3861     		str	r0, [r7, #16]
 345:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         if(false == opret)
 740              		.loc 1 345 0
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 20


 741 00c6 3B69     		ldr	r3, [r7, #16]
 742 00c8 002B     		cmp	r3, #0
 743 00ca 03D1     		bne	.L66
 346:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 347:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             driv->errno = en_dev_err_open;
 744              		.loc 1 347 0
 745 00cc FB68     		ldr	r3, [r7, #12]
 746 00ce 0222     		movs	r2, #2
 747 00d0 9A62     		str	r2, [r3, #40]
 348:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             goto EXIT_OPENERR;
 748              		.loc 1 348 0
 749 00d2 1BE0     		b	.L70
 750              	.L66:
 349:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
 350:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 351:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 352:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     //reach here means all the initialize is ok
 353:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     //add the dev to the list of the drive and  attach the driv to the device
 354:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     driv->opencounter++;
 751              		.loc 1 354 0
 752 00d4 FB68     		ldr	r3, [r7, #12]
 753 00d6 5B6A     		ldr	r3, [r3, #36]
 754 00d8 5A1C     		adds	r2, r3, #1
 755 00da FB68     		ldr	r3, [r7, #12]
 756 00dc 5A62     		str	r2, [r3, #36]
 355:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     dev->nxt = driv->devlst;
 757              		.loc 1 355 0
 758 00de FB68     		ldr	r3, [r7, #12]
 759 00e0 9A69     		ldr	r2, [r3, #24]
 760 00e2 7B69     		ldr	r3, [r7, #20]
 761 00e4 1A60     		str	r2, [r3]
 356:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     driv->devlst = dev;
 762              		.loc 1 356 0
 763 00e6 FB68     		ldr	r3, [r7, #12]
 764 00e8 7A69     		ldr	r2, [r7, #20]
 765 00ea 9A61     		str	r2, [r3, #24]
 357:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 358:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     dev->driv = driv;
 766              		.loc 1 358 0
 767 00ec 7B69     		ldr	r3, [r7, #20]
 768 00ee FA68     		ldr	r2, [r7, #12]
 769 00f0 5A60     		str	r2, [r3, #4]
 359:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     dev->openflag =  flag;
 770              		.loc 1 359 0
 771 00f2 3A68     		ldr	r2, [r7]
 772 00f4 7B69     		ldr	r3, [r7, #20]
 773 00f6 9A60     		str	r2, [r3, #8]
 360:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 361:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     osal_mutex_unlock(s_los_driv_module.lock);
 774              		.loc 1 361 0
 775 00f8 0F4B     		ldr	r3, .L77
 776 00fa 1B68     		ldr	r3, [r3]
 777 00fc 1846     		mov	r0, r3
 778 00fe FFF7FEFF 		bl	osal_mutex_unlock
 362:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return dev;
 779              		.loc 1 362 0
 780 0102 7B69     		ldr	r3, [r7, #20]
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 21


 781 0104 13E0     		b	.L67
 782              	.L62:
 783              	.L68:
 784              	.L69:
 785              	.L75:
 322:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 786              		.loc 1 322 0
 787 0106 00BF     		nop
 788 0108 00E0     		b	.L70
 789              	.L76:
 327:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 790              		.loc 1 327 0
 791 010a 00BF     		nop
 792              	.L70:
 363:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 364:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_OPENERR:
 365:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_INITERR:
 366:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_EXCLERR:
 367:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_DRIVERR:
 368:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     osal_mutex_unlock(s_los_driv_module.lock);
 793              		.loc 1 368 0
 794 010c 0A4B     		ldr	r3, .L77
 795 010e 1B68     		ldr	r3, [r3]
 796 0110 1846     		mov	r0, r3
 797 0112 FFF7FEFF 		bl	osal_mutex_unlock
 798 0116 00E0     		b	.L60
 799              	.L74:
 316:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 800              		.loc 1 316 0
 801 0118 00BF     		nop
 802              	.L60:
 369:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_MUTEXERR:
 370:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     osal_free(dev);
 803              		.loc 1 370 0
 804 011a 7869     		ldr	r0, [r7, #20]
 805 011c FFF7FEFF 		bl	osal_free
 371:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     dev = NULL;
 806              		.loc 1 371 0
 807 0120 0023     		movs	r3, #0
 808 0122 7B61     		str	r3, [r7, #20]
 809 0124 02E0     		b	.L71
 810              	.L57:
 811              	.L72:
 303:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 812              		.loc 1 303 0
 813 0126 00BF     		nop
 814 0128 00E0     		b	.L71
 815              	.L73:
 309:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 816              		.loc 1 309 0
 817 012a 00BF     		nop
 818              	.L71:
 372:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_MEMERR:
 373:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_PARAERR:
 374:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return dev;
 819              		.loc 1 374 0
 820 012c 7B69     		ldr	r3, [r7, #20]
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 22


 821              	.L67:
 375:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
 822              		.loc 1 375 0
 823 012e 1846     		mov	r0, r3
 824 0130 1837     		adds	r7, r7, #24
 825              	.LCFI34:
 826              		.cfi_def_cfa_offset 8
 827 0132 BD46     		mov	sp, r7
 828              	.LCFI35:
 829              		.cfi_def_cfa_register 13
 830              		@ sp needed
 831 0134 80BD     		pop	{r7, pc}
 832              	.L78:
 833 0136 00BF     		.align	2
 834              	.L77:
 835 0138 00000000 		.word	s_los_driv_module
 836              		.cfi_endproc
 837              	.LFE9:
 839              		.section	.text.los_dev_close,"ax",%progbits
 840              		.align	1
 841              		.global	los_dev_close
 842              		.syntax unified
 843              		.thumb
 844              		.thumb_func
 845              		.fpu fpv4-sp-d16
 847              	los_dev_close:
 848              	.LFB10:
 376:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 377:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /*******************************************************************************
 378:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** function     :close the device of opened
 379:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** parameters   :handle returned by open
 380:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** instruction  :
 381:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** *******************************************************************************/
 382:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** bool_t  los_dev_close  (los_dev_t dev)
 383:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
 849              		.loc 1 383 0
 850              		.cfi_startproc
 851              		@ args = 0, pretend = 0, frame = 24
 852              		@ frame_needed = 1, uses_anonymous_args = 0
 853 0000 80B5     		push	{r7, lr}
 854              	.LCFI36:
 855              		.cfi_def_cfa_offset 8
 856              		.cfi_offset 7, -8
 857              		.cfi_offset 14, -4
 858 0002 86B0     		sub	sp, sp, #24
 859              	.LCFI37:
 860              		.cfi_def_cfa_offset 32
 861 0004 00AF     		add	r7, sp, #0
 862              	.LCFI38:
 863              		.cfi_def_cfa_register 7
 864 0006 7860     		str	r0, [r7, #4]
 384:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     bool_t ret = false;
 865              		.loc 1 384 0
 866 0008 0023     		movs	r3, #0
 867 000a 7B61     		str	r3, [r7, #20]
 385:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct dev_cb *devcb = NULL;
 868              		.loc 1 385 0
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 23


 869 000c 0023     		movs	r3, #0
 870 000e FB60     		str	r3, [r7, #12]
 386:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct dev_cb *tmp = NULL;
 871              		.loc 1 386 0
 872 0010 0023     		movs	r3, #0
 873 0012 3B61     		str	r3, [r7, #16]
 387:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct driv_cb *driv = NULL;
 874              		.loc 1 387 0
 875 0014 0023     		movs	r3, #0
 876 0016 BB60     		str	r3, [r7, #8]
 388:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 389:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if ( NULL == dev )
 877              		.loc 1 389 0
 878 0018 7B68     		ldr	r3, [r7, #4]
 879 001a 002B     		cmp	r3, #0
 880 001c 6BD0     		beq	.L96
 390:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 391:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_PARAERR;
 392:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 393:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     devcb = dev;
 881              		.loc 1 393 0
 882 001e 7B68     		ldr	r3, [r7, #4]
 883 0020 FB60     		str	r3, [r7, #12]
 394:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 395:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(false == osal_mutex_lock(s_los_driv_module.lock))
 884              		.loc 1 395 0
 885 0022 394B     		ldr	r3, .L100
 886 0024 1B68     		ldr	r3, [r3]
 887 0026 1846     		mov	r0, r3
 888 0028 FFF7FEFF 		bl	osal_mutex_lock
 889 002c 0346     		mov	r3, r0
 890 002e 002B     		cmp	r3, #0
 891 0030 63D0     		beq	.L97
 396:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 397:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_MUTEXERR;
 398:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 399:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 400:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     //deattach the dev from the driv
 401:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     driv = devcb->driv;
 892              		.loc 1 401 0
 893 0032 FB68     		ldr	r3, [r7, #12]
 894 0034 5B68     		ldr	r3, [r3, #4]
 895 0036 BB60     		str	r3, [r7, #8]
 402:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(NULL == driv)
 896              		.loc 1 402 0
 897 0038 BB68     		ldr	r3, [r7, #8]
 898 003a 002B     		cmp	r3, #0
 899 003c 52D0     		beq	.L98
 403:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 404:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         goto EXIT_DRIVERR;
 405:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 406:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 407:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(devcb == driv->devlst)
 900              		.loc 1 407 0
 901 003e BB68     		ldr	r3, [r7, #8]
 902 0040 9B69     		ldr	r3, [r3, #24]
 903 0042 FA68     		ldr	r2, [r7, #12]
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 24


 904 0044 9A42     		cmp	r2, r3
 905 0046 04D1     		bne	.L85
 408:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 409:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         driv->devlst = devcb->nxt;
 906              		.loc 1 409 0
 907 0048 FB68     		ldr	r3, [r7, #12]
 908 004a 1A68     		ldr	r2, [r3]
 909 004c BB68     		ldr	r3, [r7, #8]
 910 004e 9A61     		str	r2, [r3, #24]
 911 0050 16E0     		b	.L86
 912              	.L85:
 410:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 411:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     else
 412:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 413:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         tmp = driv->devlst;
 913              		.loc 1 413 0
 914 0052 BB68     		ldr	r3, [r7, #8]
 915 0054 9B69     		ldr	r3, [r3, #24]
 916 0056 3B61     		str	r3, [r7, #16]
 414:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         while(NULL != tmp)
 917              		.loc 1 414 0
 918 0058 0CE0     		b	.L87
 919              	.L90:
 415:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 416:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             if(tmp->nxt == devcb)
 920              		.loc 1 416 0
 921 005a 3B69     		ldr	r3, [r7, #16]
 922 005c 1B68     		ldr	r3, [r3]
 923 005e FA68     		ldr	r2, [r7, #12]
 924 0060 9A42     		cmp	r2, r3
 925 0062 04D1     		bne	.L88
 417:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             {
 418:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 tmp->nxt = devcb->nxt;
 926              		.loc 1 418 0
 927 0064 FB68     		ldr	r3, [r7, #12]
 928 0066 1A68     		ldr	r2, [r3]
 929 0068 3B69     		ldr	r3, [r7, #16]
 930 006a 1A60     		str	r2, [r3]
 419:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 break;
 931              		.loc 1 419 0
 932 006c 05E0     		b	.L89
 933              	.L88:
 420:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             }
 421:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             tmp = tmp->nxt;
 934              		.loc 1 421 0
 935 006e 3B69     		ldr	r3, [r7, #16]
 936 0070 1B68     		ldr	r3, [r3]
 937 0072 3B61     		str	r3, [r7, #16]
 938              	.L87:
 414:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 939              		.loc 1 414 0
 940 0074 3B69     		ldr	r3, [r7, #16]
 941 0076 002B     		cmp	r3, #0
 942 0078 EFD1     		bne	.L90
 943              	.L89:
 422:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
 423:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         if(NULL == tmp)
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 25


 944              		.loc 1 423 0
 945 007a 3B69     		ldr	r3, [r7, #16]
 946 007c 002B     		cmp	r3, #0
 947 007e 33D0     		beq	.L99
 948              	.L86:
 424:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 425:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             goto EXIT_DETACHERR;
 426:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
 427:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 428:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(NULL != driv->op->close)
 949              		.loc 1 428 0
 950 0080 BB68     		ldr	r3, [r7, #8]
 951 0082 1B69     		ldr	r3, [r3, #16]
 952 0084 DB68     		ldr	r3, [r3, #12]
 953 0086 002B     		cmp	r3, #0
 954 0088 06D0     		beq	.L91
 429:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 430:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         driv->op->close(driv->pri);
 955              		.loc 1 430 0
 956 008a BB68     		ldr	r3, [r7, #8]
 957 008c 1B69     		ldr	r3, [r3, #16]
 958 008e DB68     		ldr	r3, [r3, #12]
 959 0090 BA68     		ldr	r2, [r7, #8]
 960 0092 5268     		ldr	r2, [r2, #4]
 961 0094 1046     		mov	r0, r2
 962 0096 9847     		blx	r3
 963              	.LVL2:
 964              	.L91:
 431:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 432:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 433:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if((NULL == driv->devlst) && (NULL != driv->op->deinit))
 965              		.loc 1 433 0
 966 0098 BB68     		ldr	r3, [r7, #8]
 967 009a 9B69     		ldr	r3, [r3, #24]
 968 009c 002B     		cmp	r3, #0
 969 009e 11D1     		bne	.L92
 970              		.loc 1 433 0 is_stmt 0 discriminator 1
 971 00a0 BB68     		ldr	r3, [r7, #8]
 972 00a2 1B69     		ldr	r3, [r3, #16]
 973 00a4 DB69     		ldr	r3, [r3, #28]
 974 00a6 002B     		cmp	r3, #0
 975 00a8 0CD0     		beq	.L92
 434:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 435:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         driv->op->deinit(driv->pri);
 976              		.loc 1 435 0 is_stmt 1
 977 00aa BB68     		ldr	r3, [r7, #8]
 978 00ac 1B69     		ldr	r3, [r3, #16]
 979 00ae DB69     		ldr	r3, [r3, #28]
 980 00b0 BA68     		ldr	r2, [r7, #8]
 981 00b2 5268     		ldr	r2, [r2, #4]
 982 00b4 1046     		mov	r0, r2
 983 00b6 9847     		blx	r3
 984              	.LVL3:
 436:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         driv->drivstatus &= (~cn_driv_status_initialized);
 985              		.loc 1 436 0
 986 00b8 BB68     		ldr	r3, [r7, #8]
 987 00ba 5B69     		ldr	r3, [r3, #20]
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 26


 988 00bc 23F00102 		bic	r2, r3, #1
 989 00c0 BB68     		ldr	r3, [r7, #8]
 990 00c2 5A61     		str	r2, [r3, #20]
 991              	.L92:
 437:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 438:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 439:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     osal_free(dev);
 992              		.loc 1 439 0
 993 00c4 7868     		ldr	r0, [r7, #4]
 994 00c6 FFF7FEFF 		bl	osal_free
 440:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     driv->opencounter--;
 995              		.loc 1 440 0
 996 00ca BB68     		ldr	r3, [r7, #8]
 997 00cc 5B6A     		ldr	r3, [r3, #36]
 998 00ce 5A1E     		subs	r2, r3, #1
 999 00d0 BB68     		ldr	r3, [r7, #8]
 1000 00d2 5A62     		str	r2, [r3, #36]
 441:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 442:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     osal_mutex_unlock(s_los_driv_module.lock);
 1001              		.loc 1 442 0
 1002 00d4 0C4B     		ldr	r3, .L100
 1003 00d6 1B68     		ldr	r3, [r3]
 1004 00d8 1846     		mov	r0, r3
 1005 00da FFF7FEFF 		bl	osal_mutex_unlock
 443:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 444:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     ret = true;
 1006              		.loc 1 444 0
 1007 00de 0123     		movs	r3, #1
 1008 00e0 7B61     		str	r3, [r7, #20]
 1009 00e2 02E0     		b	.L93
 1010              	.L84:
 1011              	.L98:
 404:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 1012              		.loc 1 404 0
 1013 00e4 00BF     		nop
 1014 00e6 00E0     		b	.L93
 1015              	.L99:
 425:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
 1016              		.loc 1 425 0
 1017 00e8 00BF     		nop
 1018              	.L93:
 445:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 446:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_DETACHERR:
 447:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_DRIVERR:
 448:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     osal_mutex_unlock(s_los_driv_module.lock);
 1019              		.loc 1 448 0
 1020 00ea 074B     		ldr	r3, .L100
 1021 00ec 1B68     		ldr	r3, [r3]
 1022 00ee 1846     		mov	r0, r3
 1023 00f0 FFF7FEFF 		bl	osal_mutex_unlock
 1024 00f4 02E0     		b	.L94
 1025              	.L81:
 1026              	.L96:
 391:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 1027              		.loc 1 391 0
 1028 00f6 00BF     		nop
 1029 00f8 00E0     		b	.L94
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 27


 1030              	.L97:
 397:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 1031              		.loc 1 397 0
 1032 00fa 00BF     		nop
 1033              	.L94:
 449:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_MUTEXERR:
 450:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** EXIT_PARAERR:
 451:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return ret;
 1034              		.loc 1 451 0
 1035 00fc 7B69     		ldr	r3, [r7, #20]
 452:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
 1036              		.loc 1 452 0
 1037 00fe 1846     		mov	r0, r3
 1038 0100 1837     		adds	r7, r7, #24
 1039              	.LCFI39:
 1040              		.cfi_def_cfa_offset 8
 1041 0102 BD46     		mov	sp, r7
 1042              	.LCFI40:
 1043              		.cfi_def_cfa_register 13
 1044              		@ sp needed
 1045 0104 80BD     		pop	{r7, pc}
 1046              	.L101:
 1047 0106 00BF     		.align	2
 1048              	.L100:
 1049 0108 00000000 		.word	s_los_driv_module
 1050              		.cfi_endproc
 1051              	.LFE10:
 1053              		.section	.text.los_dev_read,"ax",%progbits
 1054              		.align	1
 1055              		.global	los_dev_read
 1056              		.syntax unified
 1057              		.thumb
 1058              		.thumb_func
 1059              		.fpu fpv4-sp-d16
 1061              	los_dev_read:
 1062              	.LFB11:
 453:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 454:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /*******************************************************************************
 455:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** function     :use this function to read data from the device
 456:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** parameters   :dev,returned by the los_dev_open function
 457:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               offet:from where to read,only used for storage device
 458:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               buf:used to storage the data
 459:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               len:the length of the buf
 460:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               timeout:the waittime if no data current
 461:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** instruction  :how many data has been read to the buf
 462:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** *******************************************************************************/
 463:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** ssize_t   los_dev_read  (los_dev_t dev,size_t offset, void *buf,size_t len,uint32_t timeout)
 464:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
 1063              		.loc 1 464 0
 1064              		.cfi_startproc
 1065              		@ args = 4, pretend = 0, frame = 32
 1066              		@ frame_needed = 1, uses_anonymous_args = 0
 1067 0000 90B5     		push	{r4, r7, lr}
 1068              	.LCFI41:
 1069              		.cfi_def_cfa_offset 12
 1070              		.cfi_offset 4, -12
 1071              		.cfi_offset 7, -8
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 28


 1072              		.cfi_offset 14, -4
 1073 0002 8BB0     		sub	sp, sp, #44
 1074              	.LCFI42:
 1075              		.cfi_def_cfa_offset 56
 1076 0004 02AF     		add	r7, sp, #8
 1077              	.LCFI43:
 1078              		.cfi_def_cfa 7, 48
 1079 0006 F860     		str	r0, [r7, #12]
 1080 0008 B960     		str	r1, [r7, #8]
 1081 000a 7A60     		str	r2, [r7, #4]
 1082 000c 3B60     		str	r3, [r7]
 465:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     ssize_t ret = 0;
 1083              		.loc 1 465 0
 1084 000e 0023     		movs	r3, #0
 1085 0010 FB61     		str	r3, [r7, #28]
 466:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 467:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct driv_cb *drivcb;
 468:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 469:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if((NULL != dev)&&(NULL != buf)&&(0 != len))
 1086              		.loc 1 469 0
 1087 0012 FB68     		ldr	r3, [r7, #12]
 1088 0014 002B     		cmp	r3, #0
 1089 0016 2ED0     		beq	.L103
 1090              		.loc 1 469 0 is_stmt 0 discriminator 1
 1091 0018 7B68     		ldr	r3, [r7, #4]
 1092 001a 002B     		cmp	r3, #0
 1093 001c 2BD0     		beq	.L103
 1094              		.loc 1 469 0 discriminator 2
 1095 001e 3B68     		ldr	r3, [r7]
 1096 0020 002B     		cmp	r3, #0
 1097 0022 28D0     		beq	.L103
 470:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 471:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         devcb = dev;
 1098              		.loc 1 471 0 is_stmt 1
 1099 0024 FB68     		ldr	r3, [r7, #12]
 1100 0026 BB61     		str	r3, [r7, #24]
 472:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         if((0 == (devcb->openflag & O_WRONLY)))
 1101              		.loc 1 472 0
 1102 0028 BB69     		ldr	r3, [r7, #24]
 1103 002a 9B68     		ldr	r3, [r3, #8]
 1104 002c 03F00103 		and	r3, r3, #1
 1105 0030 002B     		cmp	r3, #0
 1106 0032 20D1     		bne	.L103
 473:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 474:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             drivcb = devcb->driv;
 1107              		.loc 1 474 0
 1108 0034 BB69     		ldr	r3, [r7, #24]
 1109 0036 5B68     		ldr	r3, [r3, #4]
 1110 0038 7B61     		str	r3, [r7, #20]
 475:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             if((NULL != drivcb->op)&&(NULL != drivcb->op->read))
 1111              		.loc 1 475 0
 1112 003a 7B69     		ldr	r3, [r7, #20]
 1113 003c 1B69     		ldr	r3, [r3, #16]
 1114 003e 002B     		cmp	r3, #0
 1115 0040 19D0     		beq	.L103
 1116              		.loc 1 475 0 is_stmt 0 discriminator 1
 1117 0042 7B69     		ldr	r3, [r7, #20]
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 29


 1118 0044 1B69     		ldr	r3, [r3, #16]
 1119 0046 5B68     		ldr	r3, [r3, #4]
 1120 0048 002B     		cmp	r3, #0
 1121 004a 14D0     		beq	.L103
 476:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             {
 477:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 ret = drivcb->op->read( drivcb->pri,offset,buf,len,timeout);
 1122              		.loc 1 477 0 is_stmt 1
 1123 004c 7B69     		ldr	r3, [r7, #20]
 1124 004e 1B69     		ldr	r3, [r3, #16]
 1125 0050 5C68     		ldr	r4, [r3, #4]
 1126 0052 7B69     		ldr	r3, [r7, #20]
 1127 0054 5868     		ldr	r0, [r3, #4]
 1128 0056 3B6B     		ldr	r3, [r7, #48]
 1129 0058 0093     		str	r3, [sp]
 1130 005a 3B68     		ldr	r3, [r7]
 1131 005c 7A68     		ldr	r2, [r7, #4]
 1132 005e B968     		ldr	r1, [r7, #8]
 1133 0060 A047     		blx	r4
 1134              	.LVL4:
 1135 0062 F861     		str	r0, [r7, #28]
 478:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 if(ret > 0)
 1136              		.loc 1 478 0
 1137 0064 FB69     		ldr	r3, [r7, #28]
 1138 0066 002B     		cmp	r3, #0
 1139 0068 05DD     		ble	.L103
 479:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 {
 480:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                     drivcb->total_read += ret;
 1140              		.loc 1 480 0
 1141 006a 7B69     		ldr	r3, [r7, #20]
 1142 006c 1A6A     		ldr	r2, [r3, #32]
 1143 006e FB69     		ldr	r3, [r7, #28]
 1144 0070 1A44     		add	r2, r2, r3
 1145 0072 7B69     		ldr	r3, [r7, #20]
 1146 0074 1A62     		str	r2, [r3, #32]
 1147              	.L103:
 481:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 }
 482:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             }
 483:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
 484:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 485:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 486:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return ret;
 1148              		.loc 1 486 0
 1149 0076 FB69     		ldr	r3, [r7, #28]
 487:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
 1150              		.loc 1 487 0
 1151 0078 1846     		mov	r0, r3
 1152 007a 2437     		adds	r7, r7, #36
 1153              	.LCFI44:
 1154              		.cfi_def_cfa_offset 12
 1155 007c BD46     		mov	sp, r7
 1156              	.LCFI45:
 1157              		.cfi_def_cfa_register 13
 1158              		@ sp needed
 1159 007e 90BD     		pop	{r4, r7, pc}
 1160              		.cfi_endproc
 1161              	.LFE11:
 1163              		.section	.text.los_dev_write,"ax",%progbits
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 30


 1164              		.align	1
 1165              		.global	los_dev_write
 1166              		.syntax unified
 1167              		.thumb
 1168              		.thumb_func
 1169              		.fpu fpv4-sp-d16
 1171              	los_dev_write:
 1172              	.LFB12:
 488:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 489:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /*******************************************************************************
 490:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** function     :use this function to write data to the device
 491:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** parameters   :dev,returned by the los_dev_open function
 492:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               offset: from where to write,only used for storage device
 493:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               buf:the data to be written
 494:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               len:the length of the buf
 495:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               timeout:the waittime if no data current
 496:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** instruction  :how many data has been written to the device
 497:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** *******************************************************************************/
 498:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** ssize_t los_dev_write (los_dev_t dev,size_t offset,const void *buf,size_t len, uint32_t timeout)
 499:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
 1173              		.loc 1 499 0
 1174              		.cfi_startproc
 1175              		@ args = 4, pretend = 0, frame = 32
 1176              		@ frame_needed = 1, uses_anonymous_args = 0
 1177 0000 90B5     		push	{r4, r7, lr}
 1178              	.LCFI46:
 1179              		.cfi_def_cfa_offset 12
 1180              		.cfi_offset 4, -12
 1181              		.cfi_offset 7, -8
 1182              		.cfi_offset 14, -4
 1183 0002 8BB0     		sub	sp, sp, #44
 1184              	.LCFI47:
 1185              		.cfi_def_cfa_offset 56
 1186 0004 02AF     		add	r7, sp, #8
 1187              	.LCFI48:
 1188              		.cfi_def_cfa 7, 48
 1189 0006 F860     		str	r0, [r7, #12]
 1190 0008 B960     		str	r1, [r7, #8]
 1191 000a 7A60     		str	r2, [r7, #4]
 1192 000c 3B60     		str	r3, [r7]
 500:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     ssize_t ret = 0;
 1193              		.loc 1 500 0
 1194 000e 0023     		movs	r3, #0
 1195 0010 FB61     		str	r3, [r7, #28]
 501:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 502:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct driv_cb *drivcb;
 503:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 504:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if((NULL != dev) && (NULL != buf) && (len != 0))
 1196              		.loc 1 504 0
 1197 0012 FB68     		ldr	r3, [r7, #12]
 1198 0014 002B     		cmp	r3, #0
 1199 0016 34D0     		beq	.L106
 1200              		.loc 1 504 0 is_stmt 0 discriminator 1
 1201 0018 7B68     		ldr	r3, [r7, #4]
 1202 001a 002B     		cmp	r3, #0
 1203 001c 31D0     		beq	.L106
 1204              		.loc 1 504 0 discriminator 2
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 31


 1205 001e 3B68     		ldr	r3, [r7]
 1206 0020 002B     		cmp	r3, #0
 1207 0022 2ED0     		beq	.L106
 505:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 506:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         devcb = dev;
 1208              		.loc 1 506 0 is_stmt 1
 1209 0024 FB68     		ldr	r3, [r7, #12]
 1210 0026 BB61     		str	r3, [r7, #24]
 507:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         if((devcb->openflag & O_WRONLY) || (devcb->openflag & O_RDWR))
 1211              		.loc 1 507 0
 1212 0028 BB69     		ldr	r3, [r7, #24]
 1213 002a 9B68     		ldr	r3, [r3, #8]
 1214 002c 03F00103 		and	r3, r3, #1
 1215 0030 002B     		cmp	r3, #0
 1216 0032 05D1     		bne	.L107
 1217              		.loc 1 507 0 is_stmt 0 discriminator 1
 1218 0034 BB69     		ldr	r3, [r7, #24]
 1219 0036 9B68     		ldr	r3, [r3, #8]
 1220 0038 03F00203 		and	r3, r3, #2
 1221 003c 002B     		cmp	r3, #0
 1222 003e 20D0     		beq	.L106
 1223              	.L107:
 508:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 509:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             drivcb = devcb->driv;
 1224              		.loc 1 509 0 is_stmt 1
 1225 0040 BB69     		ldr	r3, [r7, #24]
 1226 0042 5B68     		ldr	r3, [r3, #4]
 1227 0044 7B61     		str	r3, [r7, #20]
 510:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             if((NULL != drivcb->op)&&(NULL != drivcb->op->write))
 1228              		.loc 1 510 0
 1229 0046 7B69     		ldr	r3, [r7, #20]
 1230 0048 1B69     		ldr	r3, [r3, #16]
 1231 004a 002B     		cmp	r3, #0
 1232 004c 19D0     		beq	.L106
 1233              		.loc 1 510 0 is_stmt 0 discriminator 1
 1234 004e 7B69     		ldr	r3, [r7, #20]
 1235 0050 1B69     		ldr	r3, [r3, #16]
 1236 0052 9B68     		ldr	r3, [r3, #8]
 1237 0054 002B     		cmp	r3, #0
 1238 0056 14D0     		beq	.L106
 511:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             {
 512:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 ret = drivcb->op->write( drivcb->pri,offset,buf,len,timeout);
 1239              		.loc 1 512 0 is_stmt 1
 1240 0058 7B69     		ldr	r3, [r7, #20]
 1241 005a 1B69     		ldr	r3, [r3, #16]
 1242 005c 9C68     		ldr	r4, [r3, #8]
 1243 005e 7B69     		ldr	r3, [r7, #20]
 1244 0060 5868     		ldr	r0, [r3, #4]
 1245 0062 3B6B     		ldr	r3, [r7, #48]
 1246 0064 0093     		str	r3, [sp]
 1247 0066 3B68     		ldr	r3, [r7]
 1248 0068 7A68     		ldr	r2, [r7, #4]
 1249 006a B968     		ldr	r1, [r7, #8]
 1250 006c A047     		blx	r4
 1251              	.LVL5:
 1252 006e F861     		str	r0, [r7, #28]
 513:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 if(ret > 0)
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 32


 1253              		.loc 1 513 0
 1254 0070 FB69     		ldr	r3, [r7, #28]
 1255 0072 002B     		cmp	r3, #0
 1256 0074 05DD     		ble	.L106
 514:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 {
 515:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                     drivcb->total_write += ret;
 1257              		.loc 1 515 0
 1258 0076 7B69     		ldr	r3, [r7, #20]
 1259 0078 DA69     		ldr	r2, [r3, #28]
 1260 007a FB69     		ldr	r3, [r7, #28]
 1261 007c 1A44     		add	r2, r2, r3
 1262 007e 7B69     		ldr	r3, [r7, #20]
 1263 0080 DA61     		str	r2, [r3, #28]
 1264              	.L106:
 516:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 }
 517:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             }
 518:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
 519:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 520:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 521:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return ret;
 1265              		.loc 1 521 0
 1266 0082 FB69     		ldr	r3, [r7, #28]
 522:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
 1267              		.loc 1 522 0
 1268 0084 1846     		mov	r0, r3
 1269 0086 2437     		adds	r7, r7, #36
 1270              	.LCFI49:
 1271              		.cfi_def_cfa_offset 12
 1272 0088 BD46     		mov	sp, r7
 1273              	.LCFI50:
 1274              		.cfi_def_cfa_register 13
 1275              		@ sp needed
 1276 008a 90BD     		pop	{r4, r7, pc}
 1277              		.cfi_endproc
 1278              	.LFE12:
 1280              		.section	.text.los_dev_ioctl,"ax",%progbits
 1281              		.align	1
 1282              		.global	los_dev_ioctl
 1283              		.syntax unified
 1284              		.thumb
 1285              		.thumb_func
 1286              		.fpu fpv4-sp-d16
 1288              	los_dev_ioctl:
 1289              	.LFB13:
 523:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 524:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /*******************************************************************************
 525:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** function     :use this function to control the device
 526:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** parameters   :dev,returned by the los_dev_open function
 527:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               cmd, must compatible with bsp develop
 528:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               para,used with cmd, its length and format depend on the bsp develop
 529:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** instruction  :ctrol true or false
 530:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** *******************************************************************************/
 531:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** bool_t los_dev_ioctl (los_dev_t dev,unsigned int cmd,void *para,int paralen)
 532:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
 1290              		.loc 1 532 0
 1291              		.cfi_startproc
 1292              		@ args = 0, pretend = 0, frame = 32
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 33


 1293              		@ frame_needed = 1, uses_anonymous_args = 0
 1294 0000 90B5     		push	{r4, r7, lr}
 1295              	.LCFI51:
 1296              		.cfi_def_cfa_offset 12
 1297              		.cfi_offset 4, -12
 1298              		.cfi_offset 7, -8
 1299              		.cfi_offset 14, -4
 1300 0002 89B0     		sub	sp, sp, #36
 1301              	.LCFI52:
 1302              		.cfi_def_cfa_offset 48
 1303 0004 00AF     		add	r7, sp, #0
 1304              	.LCFI53:
 1305              		.cfi_def_cfa_register 7
 1306 0006 F860     		str	r0, [r7, #12]
 1307 0008 B960     		str	r1, [r7, #8]
 1308 000a 7A60     		str	r2, [r7, #4]
 1309 000c 3B60     		str	r3, [r7]
 533:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     bool_t ret = false;
 1310              		.loc 1 533 0
 1311 000e 0023     		movs	r3, #0
 1312 0010 FB61     		str	r3, [r7, #28]
 534:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 535:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct driv_cb *drivcb;
 536:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 537:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(NULL != dev)
 1313              		.loc 1 537 0
 1314 0012 FB68     		ldr	r3, [r7, #12]
 1315 0014 002B     		cmp	r3, #0
 1316 0016 17D0     		beq	.L110
 538:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 539:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         devcb = dev;
 1317              		.loc 1 539 0
 1318 0018 FB68     		ldr	r3, [r7, #12]
 1319 001a BB61     		str	r3, [r7, #24]
 540:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         drivcb = devcb->driv;
 1320              		.loc 1 540 0
 1321 001c BB69     		ldr	r3, [r7, #24]
 1322 001e 5B68     		ldr	r3, [r3, #4]
 1323 0020 7B61     		str	r3, [r7, #20]
 541:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         if((NULL != drivcb->op)&&(NULL != drivcb->op->ioctl))
 1324              		.loc 1 541 0
 1325 0022 7B69     		ldr	r3, [r7, #20]
 1326 0024 1B69     		ldr	r3, [r3, #16]
 1327 0026 002B     		cmp	r3, #0
 1328 0028 0ED0     		beq	.L110
 1329              		.loc 1 541 0 is_stmt 0 discriminator 1
 1330 002a 7B69     		ldr	r3, [r7, #20]
 1331 002c 1B69     		ldr	r3, [r3, #16]
 1332 002e 1B69     		ldr	r3, [r3, #16]
 1333 0030 002B     		cmp	r3, #0
 1334 0032 09D0     		beq	.L110
 542:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 543:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             ret = drivcb->op->ioctl( drivcb->pri,cmd,para,paralen);
 1335              		.loc 1 543 0 is_stmt 1
 1336 0034 7B69     		ldr	r3, [r7, #20]
 1337 0036 1B69     		ldr	r3, [r3, #16]
 1338 0038 1C69     		ldr	r4, [r3, #16]
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 34


 1339 003a 7B69     		ldr	r3, [r7, #20]
 1340 003c 5868     		ldr	r0, [r3, #4]
 1341 003e 3B68     		ldr	r3, [r7]
 1342 0040 7A68     		ldr	r2, [r7, #4]
 1343 0042 B968     		ldr	r1, [r7, #8]
 1344 0044 A047     		blx	r4
 1345              	.LVL6:
 1346 0046 F861     		str	r0, [r7, #28]
 1347              	.L110:
 544:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
 545:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 546:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 547:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return ret;
 1348              		.loc 1 547 0
 1349 0048 FB69     		ldr	r3, [r7, #28]
 548:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
 1350              		.loc 1 548 0
 1351 004a 1846     		mov	r0, r3
 1352 004c 2437     		adds	r7, r7, #36
 1353              	.LCFI54:
 1354              		.cfi_def_cfa_offset 12
 1355 004e BD46     		mov	sp, r7
 1356              	.LCFI55:
 1357              		.cfi_def_cfa_register 13
 1358              		@ sp needed
 1359 0050 90BD     		pop	{r4, r7, pc}
 1360              		.cfi_endproc
 1361              	.LFE13:
 1363              		.section	.text.los_dev_seek,"ax",%progbits
 1364              		.align	1
 1365              		.global	los_dev_seek
 1366              		.syntax unified
 1367              		.thumb
 1368              		.thumb_func
 1369              		.fpu fpv4-sp-d16
 1371              	los_dev_seek:
 1372              	.LFB14:
 549:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 550:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** /*******************************************************************************
 551:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** function     :use this function to set the buffer current position,like lseek
 552:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** parameters   :dev,returned by the los_dev_open function
 553:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               offset, refer to the lseek
 554:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****               fromwhere, refer to the lseek
 555:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** instruction  :return the current write/read position if success, else -1
 556:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** *******************************************************************************/
 557:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** off_t  los_dev_seek (los_dev_t dev,off_t offset,int fromwhere)
 558:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
 1373              		.loc 1 558 0
 1374              		.cfi_startproc
 1375              		@ args = 0, pretend = 0, frame = 32
 1376              		@ frame_needed = 1, uses_anonymous_args = 0
 1377 0000 80B5     		push	{r7, lr}
 1378              	.LCFI56:
 1379              		.cfi_def_cfa_offset 8
 1380              		.cfi_offset 7, -8
 1381              		.cfi_offset 14, -4
 1382 0002 88B0     		sub	sp, sp, #32
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 35


 1383              	.LCFI57:
 1384              		.cfi_def_cfa_offset 40
 1385 0004 00AF     		add	r7, sp, #0
 1386              	.LCFI58:
 1387              		.cfi_def_cfa_register 7
 1388 0006 F860     		str	r0, [r7, #12]
 1389 0008 B960     		str	r1, [r7, #8]
 1390 000a 7A60     		str	r2, [r7, #4]
 559:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     off_t ret = -1;
 1391              		.loc 1 559 0
 1392 000c 4FF0FF33 		mov	r3, #-1
 1393 0010 FB61     		str	r3, [r7, #28]
 560:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct dev_cb  *devcb;
 561:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct driv_cb *drivcb;
 562:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 563:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(NULL != dev)
 1394              		.loc 1 563 0
 1395 0012 FB68     		ldr	r3, [r7, #12]
 1396 0014 002B     		cmp	r3, #0
 1397 0016 16D0     		beq	.L113
 564:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 565:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         devcb = dev;
 1398              		.loc 1 565 0
 1399 0018 FB68     		ldr	r3, [r7, #12]
 1400 001a BB61     		str	r3, [r7, #24]
 566:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         drivcb = devcb->driv;
 1401              		.loc 1 566 0
 1402 001c BB69     		ldr	r3, [r7, #24]
 1403 001e 5B68     		ldr	r3, [r3, #4]
 1404 0020 7B61     		str	r3, [r7, #20]
 567:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         if((NULL != drivcb->op)&&(NULL != drivcb->op->seek))
 1405              		.loc 1 567 0
 1406 0022 7B69     		ldr	r3, [r7, #20]
 1407 0024 1B69     		ldr	r3, [r3, #16]
 1408 0026 002B     		cmp	r3, #0
 1409 0028 0DD0     		beq	.L113
 1410              		.loc 1 567 0 is_stmt 0 discriminator 1
 1411 002a 7B69     		ldr	r3, [r7, #20]
 1412 002c 1B69     		ldr	r3, [r3, #16]
 1413 002e 5B69     		ldr	r3, [r3, #20]
 1414 0030 002B     		cmp	r3, #0
 1415 0032 08D0     		beq	.L113
 568:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 569:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             ret = drivcb->op->seek( drivcb->pri,offset,fromwhere);
 1416              		.loc 1 569 0 is_stmt 1
 1417 0034 7B69     		ldr	r3, [r7, #20]
 1418 0036 1B69     		ldr	r3, [r3, #16]
 1419 0038 5B69     		ldr	r3, [r3, #20]
 1420 003a 7A69     		ldr	r2, [r7, #20]
 1421 003c 5068     		ldr	r0, [r2, #4]
 1422 003e 7A68     		ldr	r2, [r7, #4]
 1423 0040 B968     		ldr	r1, [r7, #8]
 1424 0042 9847     		blx	r3
 1425              	.LVL7:
 1426 0044 F861     		str	r0, [r7, #28]
 1427              	.L113:
 570:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 36


 571:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 572:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 573:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return ret;
 1428              		.loc 1 573 0
 1429 0046 FB69     		ldr	r3, [r7, #28]
 574:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
 1430              		.loc 1 574 0
 1431 0048 1846     		mov	r0, r3
 1432 004a 2037     		adds	r7, r7, #32
 1433              	.LCFI59:
 1434              		.cfi_def_cfa_offset 8
 1435 004c BD46     		mov	sp, r7
 1436              	.LCFI60:
 1437              		.cfi_def_cfa_register 13
 1438              		@ sp needed
 1439 004e 80BD     		pop	{r7, pc}
 1440              		.cfi_endproc
 1441              	.LFE14:
 1443              		.section	.rodata
 1444              		.align	2
 1445              	.LC0:
 1446 0000 25733A74 		.ascii	"%s:total %d drivers\012\015\000"
 1446      6F74616C 
 1446      20256420 
 1446      64726976 
 1446      6572730A 
 1447 0016 0000     		.align	2
 1448              	.LC1:
 1449 0018 73746174 		.ascii	"status\000"
 1449      757300
 1450 001f 00       		.align	2
 1451              	.LC2:
 1452 0020 666C6167 		.ascii	"flagmask\000"
 1452      6D61736B 
 1452      00
 1453 0029 000000   		.align	2
 1454              	.LC3:
 1455 002c 64726976 		.ascii	"drivername\000"
 1455      65726E61 
 1455      6D6500
 1456 0037 00       		.align	2
 1457              	.LC4:
 1458 0038 252D3136 		.ascii	"%-16s %-8s %-8s %-8s %-8s %-8s %-8s\015\012\000"
 1458      7320252D 
 1458      38732025 
 1458      2D387320 
 1458      252D3873 
 1459 005e 0000     		.align	2
 1460              	.LC5:
 1461 0060 6572726E 		.ascii	"errno\000"
 1461      6F00
 1462 0066 0000     		.align	2
 1463              	.LC6:
 1464 0068 6F70656E 		.ascii	"open\000"
 1464      00
 1465 006d 000000   		.align	2
 1466              	.LC7:
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 37


 1467 0070 72656164 		.ascii	"readbyte\000"
 1467      62797465 
 1467      00
 1468 0079 000000   		.align	2
 1469              	.LC8:
 1470 007c 77726974 		.ascii	"writbyte\000"
 1470      62797465 
 1470      00
 1471 0085 000000   		.align	2
 1472              	.LC9:
 1473 0088 252D3136 		.ascii	"%-16s %08x %08x %08x %08x %08x %08x\015\012\000"
 1473      73202530 
 1473      38782025 
 1473      30387820 
 1473      25303878 
 1474              		.section	.text.__driv_show_shell,"ax",%progbits
 1475              		.align	1
 1476              		.syntax unified
 1477              		.thumb
 1478              		.thumb_func
 1479              		.fpu fpv4-sp-d16
 1481              	__driv_show_shell:
 1482              	.LFB15:
 575:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 576:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 577:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** //the following function should be implement by the vfs,
 578:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** //this is very important for the multi io operation, like the select epoll and so on
 579:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** //bool_t     los_dev_upara_set (los_dev_t dev,void *para);
 580:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** //void*      los_dev_upara_get (los_dev_t dev);
 581:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 582:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** //export some shell for the driver debug
 583:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** #include <shell.h>
 584:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** //use this function to show all the driver infomation
 585:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** static int  __driv_show_shell(int argc,const char *argv[])
 586:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** {
 1483              		.loc 1 586 0
 1484              		.cfi_startproc
 1485              		@ args = 0, pretend = 0, frame = 16
 1486              		@ frame_needed = 1, uses_anonymous_args = 0
 1487 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1488              	.LCFI61:
 1489              		.cfi_def_cfa_offset 20
 1490              		.cfi_offset 4, -20
 1491              		.cfi_offset 5, -16
 1492              		.cfi_offset 6, -12
 1493              		.cfi_offset 7, -8
 1494              		.cfi_offset 14, -4
 1495 0002 89B0     		sub	sp, sp, #36
 1496              	.LCFI62:
 1497              		.cfi_def_cfa_offset 56
 1498 0004 04AF     		add	r7, sp, #16
 1499              	.LCFI63:
 1500              		.cfi_def_cfa 7, 40
 1501 0006 7860     		str	r0, [r7, #4]
 1502 0008 3960     		str	r1, [r7]
 587:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     struct driv_cb  *driv;
 588:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 38


 589:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     if(osal_mutex_lock(s_los_driv_module.lock))
 1503              		.loc 1 589 0
 1504 000a 264B     		ldr	r3, .L121
 1505 000c 1B68     		ldr	r3, [r3]
 1506 000e 1846     		mov	r0, r3
 1507 0010 FFF7FEFF 		bl	osal_mutex_lock
 1508 0014 0346     		mov	r3, r0
 1509 0016 002B     		cmp	r3, #0
 1510 0018 3FD0     		beq	.L116
 590:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     {
 591:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         printf("%s:total %d drivers\n\r",__FUNCTION__,s_los_driv_module.drivnum);
 1511              		.loc 1 591 0
 1512 001a 224B     		ldr	r3, .L121
 1513 001c 9B68     		ldr	r3, [r3, #8]
 1514 001e 1A46     		mov	r2, r3
 1515 0020 2149     		ldr	r1, .L121+4
 1516 0022 2248     		ldr	r0, .L121+8
 1517 0024 FFF7FEFF 		bl	printf
 592:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         if(s_los_driv_module.drivnum != 0) //print all the driver
 1518              		.loc 1 592 0
 1519 0028 1E4B     		ldr	r3, .L121
 1520 002a 9B68     		ldr	r3, [r3, #8]
 1521 002c 002B     		cmp	r3, #0
 1522 002e 2FD0     		beq	.L117
 593:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         {
 594:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 595:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             printf("%-16s %-8s %-8s %-8s %-8s %-8s %-8s\r\n",\
 1523              		.loc 1 595 0
 1524 0030 1F4B     		ldr	r3, .L121+12
 1525 0032 0393     		str	r3, [sp, #12]
 1526 0034 1F4B     		ldr	r3, .L121+16
 1527 0036 0293     		str	r3, [sp, #8]
 1528 0038 1F4B     		ldr	r3, .L121+20
 1529 003a 0193     		str	r3, [sp, #4]
 1530 003c 1F4B     		ldr	r3, .L121+24
 1531 003e 0093     		str	r3, [sp]
 1532 0040 1F4B     		ldr	r3, .L121+28
 1533 0042 204A     		ldr	r2, .L121+32
 1534 0044 2049     		ldr	r1, .L121+36
 1535 0046 2148     		ldr	r0, .L121+40
 1536 0048 FFF7FEFF 		bl	printf
 596:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 "drivername","flagmask","status","writbyte","readbyte","open","errno");
 597:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 598:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             driv = s_los_driv_module.drivlst;
 1537              		.loc 1 598 0
 1538 004c 154B     		ldr	r3, .L121
 1539 004e 5B68     		ldr	r3, [r3, #4]
 1540 0050 FB60     		str	r3, [r7, #12]
 599:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             while(NULL != driv)
 1541              		.loc 1 599 0
 1542 0052 1AE0     		b	.L118
 1543              	.L119:
 600:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             {
 601:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 printf("%-16s %08x %08x %08x %08x %08x %08x\r\n",driv->name,driv->flagmask,\
 1544              		.loc 1 601 0
 1545 0054 FB68     		ldr	r3, [r7, #12]
 1546 0056 9C68     		ldr	r4, [r3, #8]
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 39


 1547 0058 FB68     		ldr	r3, [r7, #12]
 1548 005a DD68     		ldr	r5, [r3, #12]
 1549 005c FB68     		ldr	r3, [r7, #12]
 1550 005e 5E69     		ldr	r6, [r3, #20]
 1551 0060 FB68     		ldr	r3, [r7, #12]
 1552 0062 DB69     		ldr	r3, [r3, #28]
 1553 0064 FA68     		ldr	r2, [r7, #12]
 1554 0066 126A     		ldr	r2, [r2, #32]
 1555 0068 F968     		ldr	r1, [r7, #12]
 1556 006a 496A     		ldr	r1, [r1, #36]
 1557 006c F868     		ldr	r0, [r7, #12]
 1558 006e 806A     		ldr	r0, [r0, #40]
 1559 0070 0390     		str	r0, [sp, #12]
 1560 0072 0291     		str	r1, [sp, #8]
 1561 0074 0192     		str	r2, [sp, #4]
 1562 0076 0093     		str	r3, [sp]
 1563 0078 3346     		mov	r3, r6
 1564 007a 2A46     		mov	r2, r5
 1565 007c 2146     		mov	r1, r4
 1566 007e 1448     		ldr	r0, .L121+44
 1567 0080 FFF7FEFF 		bl	printf
 602:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 driv->drivstatus,driv->total_write,driv->total_read,driv->opencounter,driv->errno);
 603:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****                 driv=driv->nxt;
 1568              		.loc 1 603 0
 1569 0084 FB68     		ldr	r3, [r7, #12]
 1570 0086 1B68     		ldr	r3, [r3]
 1571 0088 FB60     		str	r3, [r7, #12]
 1572              	.L118:
 599:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             {
 1573              		.loc 1 599 0
 1574 008a FB68     		ldr	r3, [r7, #12]
 1575 008c 002B     		cmp	r3, #0
 1576 008e E1D1     		bne	.L119
 1577              	.L117:
 604:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****             }
 605:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         }
 606:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 607:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****         osal_mutex_unlock(s_los_driv_module.lock);
 1578              		.loc 1 607 0
 1579 0090 044B     		ldr	r3, .L121
 1580 0092 1B68     		ldr	r3, [r3]
 1581 0094 1846     		mov	r0, r3
 1582 0096 FFF7FEFF 		bl	osal_mutex_unlock
 1583              	.L116:
 608:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     }
 609:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** 
 610:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c ****     return 0;
 1584              		.loc 1 610 0
 1585 009a 0023     		movs	r3, #0
 611:C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver\driver.c **** }
 1586              		.loc 1 611 0
 1587 009c 1846     		mov	r0, r3
 1588 009e 1437     		adds	r7, r7, #20
 1589              	.LCFI64:
 1590              		.cfi_def_cfa_offset 20
 1591 00a0 BD46     		mov	sp, r7
 1592              	.LCFI65:
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 40


 1593              		.cfi_def_cfa_register 13
 1594              		@ sp needed
 1595 00a2 F0BD     		pop	{r4, r5, r6, r7, pc}
 1596              	.L122:
 1597              		.align	2
 1598              	.L121:
 1599 00a4 00000000 		.word	s_los_driv_module
 1600 00a8 00000000 		.word	__FUNCTION__.7599
 1601 00ac 00000000 		.word	.LC0
 1602 00b0 60000000 		.word	.LC5
 1603 00b4 68000000 		.word	.LC6
 1604 00b8 70000000 		.word	.LC7
 1605 00bc 7C000000 		.word	.LC8
 1606 00c0 18000000 		.word	.LC1
 1607 00c4 20000000 		.word	.LC2
 1608 00c8 2C000000 		.word	.LC3
 1609 00cc 38000000 		.word	.LC4
 1610 00d0 88000000 		.word	.LC9
 1611              		.cfi_endproc
 1612              	.LFE15:
 1614              		.section	.rodata.__FUNCTION__.7599,"a",%progbits
 1615              		.align	2
 1618              	__FUNCTION__.7599:
 1619 0000 5F5F6472 		.ascii	"__driv_show_shell\000"
 1619      69765F73 
 1619      686F775F 
 1619      7368656C 
 1619      6C00
 1620              		.text
 1621              	.Letext0:
 1622              		.file 2 "c:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 1623              		.file 3 "c:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 1624              		.file 4 "c:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 1625              		.file 5 "c:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 1626              		.file 6 "c:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 1627              		.file 7 "c:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 1628              		.file 8 "c:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 1629              		.file 9 "c:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 1630              		.file 10 "C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/os/osal/osa
 1631              		.file 11 "C:/Users/dtjld/Desktop/AIoT_software/LiteOS_Lab_overseas/LiteOS_Lab/iot_link/driver/driv
 1632              		.file 12 "c:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.201807
ARM GAS  C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s 			page 41


DEFINED SYMBOLS
                            *ABS*:00000000 driver.c
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:18     .bss.s_los_driv_module:00000000 $d
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:21     .bss.s_los_driv_module:00000000 s_los_driv_module
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:24     .text.__driv_match:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:30     .text.__driv_match:00000000 __driv_match
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:97     .text.__driv_match:00000040 $d
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:102    .text.los_driv_register:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:109    .text.los_driv_register:00000000 los_driv_register
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:259    .text.los_driv_register:000000c8 $d
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:264    .text.los_driv_unregister:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:271    .text.los_driv_unregister:00000000 los_driv_unregister
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:406    .text.los_driv_unregister:000000a8 $d
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:411    .text.los_driv_event:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:418    .text.los_driv_event:00000000 los_driv_event
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:458    .text.osdriv_load_static:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:464    .text.osdriv_load_static:00000000 osdriv_load_static
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:532    .text.osdriv_load_static:00000044 $d
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:538    .text.los_driv_init:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:545    .text.los_driv_init:00000000 los_driv_init
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:595    .text.los_driv_init:0000002c $d
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:600    .text.los_dev_open:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:607    .text.los_dev_open:00000000 los_dev_open
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:835    .text.los_dev_open:00000138 $d
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:840    .text.los_dev_close:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:847    .text.los_dev_close:00000000 los_dev_close
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1049   .text.los_dev_close:00000108 $d
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1054   .text.los_dev_read:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1061   .text.los_dev_read:00000000 los_dev_read
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1164   .text.los_dev_write:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1171   .text.los_dev_write:00000000 los_dev_write
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1281   .text.los_dev_ioctl:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1288   .text.los_dev_ioctl:00000000 los_dev_ioctl
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1364   .text.los_dev_seek:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1371   .text.los_dev_seek:00000000 los_dev_seek
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1444   .rodata:00000000 $d
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1475   .text.__driv_show_shell:00000000 $t
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1481   .text.__driv_show_shell:00000000 __driv_show_shell
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1599   .text.__driv_show_shell:000000a4 $d
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1618   .rodata.__FUNCTION__.7599:00000000 __FUNCTION__.7599
C:\Users\dtjld\AppData\Local\Temp\ccKCj5HU.s:1615   .rodata.__FUNCTION__.7599:00000000 $d

UNDEFINED SYMBOLS
strcmp
osal_malloc
memset
osal_mutex_lock
osal_mutex_unlock
osal_free
__osdriv_start
__osdriv_end
osal_mutex_create
printf
